{% extends "base.html" %}
{% block title %}è³¼å…¥ç®¡ç† - å—ã‘å–ã£ãŸç”³è«‹{% endblock %}
{% block content %}
<div class="container-xxl py-4">
  <h2 class="fw-bold mb-1">è³¼å…¥ç®¡ç†</h2>
  <div class="text-muted mb-3">ã‚ãªãŸã®è³¼å…¥ç”³è«‹ã¨å—ã‘å–ã£ãŸç”³è«‹ã‚’ç®¡ç†</div>
  {% for a in applications %}
    <div class="card border-0 shadow-sm mb-3"><div class="card-body">
      <div class="d-flex justify-content-between align-items-start mb-2">
        <div>
          <div class="h5 mb-1">{{ a.product.title }}</div>
          <div class="d-flex gap-2 flex-wrap">
            <span class="badge bg-light text-dark">{{ a.get_order_type_display }}</span>
            <span class="badge bg-light text-dark">{{ a.get_payment_method_display }}</span>
            <span class="badge bg-light text-dark">{{ a.quantity }}ç‚¹</span>
          </div>
        </div>
        <div class="text-end">
          {% if a.calc_price %}<div class="fw-bold fs-5">Â¥{{ a.calc_price }}</div>{% endif %}
        </div>
      </div>
      <div class="bg-light rounded-2 p-3 mb-2">
        <div class="text-muted small">é…é€å…ˆä½æ‰€</div>
        <div>{{ a.postal_code }} {{ a.address }}</div>
      </div>
      <div class="mb-2"><div class="text-muted small">è³¼å…¥è€…:</div><div>{{ a.renter.email|default:a.renter.username }}</div></div>
      <div class="text-muted small">ç”³è«‹æ—¥: {{ a.created_at|date:"Yå¹´næœˆjæ—¥ H:i" }}</div>
      <div class="d-flex justify-content-between align-items-center mt-3">
        <a class="text-decoration-none" href="{% url 'frontend:product_detail' a.product_id %}">ğŸ‘ è©³ç´°ã‚’è¦‹ã‚‹</a>
        {% if a.status == 'pending' %}
          <div class="d-flex gap-2">
            <form method="post" action="{% url 'frontend:rental_app_approve' a.id %}">{% csrf_token %}<button class="btn btn-success">æ‰¿èªã™ã‚‹</button></form>
            <form method="post" action="{% url 'frontend:rental_app_reject' a.id %}">{% csrf_token %}<button class="btn btn-outline-danger">å´ä¸‹ã™ã‚‹</button></form>
          </div>
        {% else %}
          <div class="text-muted small">ã“ã®ç”³è«‹ã¯<strong>{{ a.get_status_display }}</strong>ã«ãªã£ã¦ã„ã¾ã™ã€‚</div>
        {% endif %}
      </div>
    </div></div>
  {% empty %}
    <div class="text-center text-muted py-5">å—ã‘å–ã£ãŸç”³è«‹ã¯ã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚</div>
  {% endfor %}
</div>
{% endblock %}
