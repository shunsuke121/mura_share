{% extends "base.html" %}

{% block content %}
<div class="container-xl py-4">
  <h1 class="h4 fw-bold mb-3">マイ出品</h1>
  <p class="text-muted mb-4">あなたが出品した商品の一覧です。</p>

  {% if products %}
    <div class="vstack gap-3">
      {% for p in products %}
        <div class="card shadow-sm border-0">
          <div class="card-body d-flex align-items-center gap-3">
            {# サムネイル #}
            {% with img=p.images.first %}
              {% if img %}
                <img src="{{ img.image.url }}" alt="" width="96" height="96"
                     class="rounded" style="object-fit: cover;">
              {% else %}
                <div class="bg-light rounded d-flex align-items-center justify-content-center"
                     style="width:96px;height:96px;">No Image</div>
              {% endif %}
            {% endwith %}

            <div class="flex-grow-1">
              <div class="fw-semibold">{{ p.title }}</div>
              <div class="text-muted small">
                提供: {{ p.availability_type }}
                ・在庫: {{ p.available_quantity }}/{{ p.stock_quantity }}
              </div>
            </div>

            <a href="{% url 'frontend:product_detail' p.id %}"
               class="btn btn-outline-secondary">詳細へ</a>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center text-muted py-5">
      まだ出品がありません。<br>
      <a href="{% url 'frontend:product_new' %}" class="btn btn-primary mt-3">商品を出品する</a>
    </div>
  {% endif %}
</div>
{% endblock %}
