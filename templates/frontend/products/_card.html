<style>
.ig-card { transition: box-shadow .2s ease, transform .2s ease; }
.ig-card:hover { box-shadow: 0 8px 24px rgba(0,0,0,.08); transform: translateY(-1px); }

.ig-img { transition: transform .25s ease; }
.ig-card:hover .ig-img { transform: scale(1.02); }

.ig-dot {
  display:inline-block; width:6px; height:6px; border-radius:50%;
  background-color:#ef476f; position:relative; top:-1px;
}
</style>

<div class="ig-card card h-100 border-0 rounded-4 shadow-sm">
  <a href="{% url 'frontend:product_detail' p.id %}" class="text-decoration-none">
    <div class="ratio ratio-1x1 bg-light rounded-top overflow-hidden">
      {% if p.image_url %}
        <img src="{{ p.image_url }}" alt="{{ p.title }}" class="ig-img w-100 h-100 object-fit-cover">
      {% else %}
        <div class="d-flex align-items-center justify-content-center text-muted fs-1">ğŸ“¦</div>
      {% endif %}
    </div>
  </a>

  <div class="card-body p-2">
    {# ä¾¡æ ¼ï¼ˆ/æ—¥å„ªå…ˆã€‚ä¸¡æ–¹ã‚ã‚‹ãªã‚‰2è¡Œï¼‰ #}
    {% with
      daily=p.price_per_day|default:p.daily_price
      buy=p.price_buy|default:p.sale_price
    %}
      {% if daily %}
        <div class="small fw-semibold">Â¥{{ daily|floatformat:0 }}/æ—¥</div>
      {% endif %}
      {% if buy %}
        <div class="small text-muted">è²©å£² Â¥{{ buy|floatformat:0 }}</div>
      {% endif %}
    {% endwith %}

    <div class="small fw-bold text-truncate mt-1">{{ p.title }}</div>

    {% if p.category %}
      <div class="text-muted small text-truncate">
        <span class="ig-dot me-1"></span>{{ p.category }}
      </div>
    {% endif %}

    {% if p.average_rating %}
      <div class="mt-1 small">
        <span class="text-warning">â˜…</span>
        <span class="text-body-secondary">{{ p.average_rating|floatformat:1 }}</span>
        <span class="text-body-tertiary">ï¼ˆ{{ p.review_count|default:0 }}ï¼‰</span>
      </div>
    {% endif %}
  </div>
</div>
