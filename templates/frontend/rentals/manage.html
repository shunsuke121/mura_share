{% extends "base.html" %}
{% load humanize %}

{% block content %}
<div class="container-xxl py-4 rentals">
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h2 class="fw-bold mb-1">レンタル管理</h2>
      <div class="text-muted">あなたのレンタル申請と受け取った申請を管理</div>
    </div>
  </div>

  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-secondary{% endif %} py-2 mb-2">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="segmented mb-4">
    <a class="seg-btn {% if active_tab != 'received' %}active{% endif %}"
       href="{% url 'frontend:my_applications' %}">
      私の申請 ({{ mine_count|default:0 }})
    </a>
    <a class="seg-btn {% if active_tab == 'received' %}active{% endif %}"
       href="{% url 'frontend:rental_manage' %}">
      受け取った申請 ({{ received_count|default:0 }})
    </a>
  </div>

  {% if applications %}
    <div class="vstack gap-3">
      {% for a in applications %}
        {% include "frontend/rentals/_application_card.html" with a=a mode="received" %}
      {% endfor %}
    </div>
  {% else %}
    <div class="text-center py-5 empty-state">
      <div class="empty-title">受け取った申請はまだありません</div>
      <div class="empty-sub">相手からの申請が届くとここに表示されます。</div>
    </div>
  {% endif %}
</div>
{% endblock %}
