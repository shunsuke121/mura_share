{% extends "base.html" %}
{% block title %}レンタル管理 - MURA SHARE{% endblock %}

{% block content %}
<div class="rentals">
  <div class="ms-section-title">
    <div>
      <div class="ms-kicker">Rentals</div>
      <h2>レンタル管理</h2>
      <div class="ms-muted">レンタルの進行状況をまとめて確認できます。</div>
    </div>
    <a href="{% url 'frontend:returns' %}" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-counterclockwise me-1"></i>返品・返却
    </a>
  </div>

  {% if messages %}
    <div class="mb-3">
      {% for message in messages %}
        <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% else %}alert-secondary{% endif %} py-2 mb-2">
          {{ message }}
        </div>
      {% endfor %}
    </div>
  {% endif %}

  <div class="segmented mb-4">
    <a class="seg-btn {% if active_tab != 'received' %}active{% endif %}"
       href="{% url 'frontend:rentals' %}?tab=mine">
      自分のレンタル ({{ mine|length }})
    </a>
    <a class="seg-btn {% if active_tab == 'received' %}active{% endif %}"
       href="{% url 'frontend:rentals' %}?tab=received">
      受け取ったレンタル ({{ received|length }})
    </a>
  </div>

  {% if active_tab == 'received' %}
    {% with items=received mode="received" %}
      {% include "frontend/rentals/_list.html" %}
    {% endwith %}
  {% else %}
    {% with items=mine mode="mine" %}
      {% include "frontend/rentals/_list.html" %}
    {% endwith %}
  {% endif %}
</div>
{% endblock %}
