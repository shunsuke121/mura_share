<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{% block title %}MURAシェア{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/css/app.css" rel="stylesheet">
</head>
<body>
  <!-- ヘッダー（モバイル時はオフキャンバスを開くトグル） -->
  <header class="navbar navbar-light bg-white border-bottom sticky-top">
    <div class="container-fluid">
      <button class="btn btn-outline-secondary d-lg-none"
              type="button"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasSidebar"
              aria-controls="offcanvasSidebar">
        ☰
      </button>

      <a class="navbar-brand ms-2" href="/">MURAシェア</a>

      <div class="ms-auto">
        {% if user.is_authenticated %}
          <a href="{% url 'frontend:product_new' %}"
             class="btn btn-primary me-2 d-none d-sm-inline-block">
            出品する
          </a>
          <a href="{% url 'frontend:logout' %}" class="btn btn-outline-secondary">
            ログアウト
          </a>
        {% else %}
          <a href="{% url 'frontend:signup' %}" class="btn btn-primary me-2">
            新規登録
          </a>
          <a href="{% url 'frontend:login' %}" class="btn btn-outline-secondary">
            ログイン
          </a>
        {% endif %}
      </div>
    </div>
  </header>

  <!-- レイアウト -->
  <div class="layout d-flex">
    <!-- サイドバー（LG以上：固定 / モバイル：オフキャンバス） -->
    <aside class="d-none d-lg-block bg-white border-end sidebar p-3">
      {% include "_partials/sidebar.html" %}
    </aside>

    <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasSidebar">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title">メニュー</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
      </div>
      <div class="offcanvas-body">
        {% include "_partials/sidebar.html" %}
      </div>
    </div>

    <!-- コンテンツ -->
    <main class="content-wrap p-3 p-lg-4">
      <div class="page-inner">
        {% block content %}{% endblock %}
      </div>
    </main>
  </div>  {# ← ここが抜けてた #}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>